<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UNIX時間変換 (Epoch Converter)｜Simple Tools</title>
    <meta name="description" content="UNIXタイムスタンプと日時を相互に変換するツールです。現在時刻のリアルタイム表示や、秒・ミリ秒の自動判定に対応。" />
    <link rel="stylesheet" href="/assets/css/style.css">

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-4KCLTYQ3D1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-4KCLTYQ3D1');
    </script>
</head>

<body>
    <header>
        <h1>UNIX Time Converter</h1>
        <p class="subtitle">UNIXタイムスタンプと日時の相互変換</p>
    </header>

    <div class="back-nav">
        <a href="/"><span>←</span> Home</a>
    </div>

    <main class="tool-container">

        <!-- Current Time Block -->
        <div class="current-time-block"
            style="text-align: center; margin-bottom: 2rem; padding: 1.5rem; background: rgba(0,0,0,0.2); border-radius: 1rem;">
            <div style="font-size: 0.9em; color: var(--text-muted);">現在のUNIX時間 (秒)</div>
            <div id="current-unix"
                style="font-size: 2.5em; font-weight: bold; font-family: monospace; color: var(--primary); margin: 0.5rem 0;">
                ----------</div>
            <button id="btn-pause" class="secondary-btn" style="font-size: 0.8em; padding: 0.2rem 1rem;">停止 /
                再開</button>
        </div>

        <!-- Converter: Unix to Date -->
        <h2>Timestamp → Date</h2>
        <div class="input-group" style="display: flex; gap: 1rem; align-items: stretch;">
            <input type="number" id="input-timestamp" placeholder="例: 1609459200" style="flex: 1;">
            <button id="btn-ts-to-date" class="action-btn" style="width: auto;">変換</button>
        </div>
        <div id="result-date"
            style="margin-bottom: 2rem; padding: 1rem; background: rgba(255,255,255,0.05); border-radius: 0.5rem; display: none;">
            <div style="margin-bottom: 0.5rem;"><strong>GMT:</strong> <span id="res-utc"></span></div>
            <div style="margin-bottom: 0.5rem;"><strong>Local:</strong> <span id="res-local"></span></div>
            <div><strong>ISO:</strong> <span id="res-iso"></span></div>
        </div>

        <!-- Converter: Date to Unix -->
        <h2>Date → Timestamp</h2>
        <div class="input-group" style="display: flex; gap: 1rem; flex-wrap: wrap;">
            <!-- ISO string specific input is simpler to parse than free text -->
            <input type="datetime-local" id="input-date" style="flex: 1; min-width: 200px;">
            <button id="btn-date-to-ts" class="action-btn"
                style="width: auto; background: linear-gradient(135deg, #60a5fa 0%, #3b82f6 100%);">変換</button>
        </div>
        <div id="result-ts"
            style="margin-bottom: 2rem; padding: 1rem; background: rgba(255,255,255,0.05); border-radius: 0.5rem; display: none;">
            <div style="margin-bottom: 0.5rem;"><strong>Seconds:</strong> <span id="res-seconds"
                    style="font-family: monospace; color: var(--accent);"></span></div>
            <div><strong>Milliseconds:</strong> <span id="res-ms" style="font-family: monospace;"></span></div>
        </div>

    </main>

    <footer>
        <p>&copy; 2026 Simple Tools. All rights reserved.</p>
    </footer>

    <!-- Logic Script -->
    <script type="module">
        import { UnixTimeLogic } from '../assets/js/modules/unix-time-logic.js';

        // Current Time
        const currentUnixEl = document.getElementById('current-unix');
        const btnPause = document.getElementById('btn-pause');
        let isPaused = false;

        const updateClock = () => {
            if (!isPaused) {
                const now = UnixTimeLogic.now();
                currentUnixEl.textContent = now.seconds;
            }
        };
        setInterval(updateClock, 1000);
        updateClock();

        btnPause.addEventListener('click', () => {
            isPaused = !isPaused;
            btnPause.textContent = isPaused ? '再開' : '停止';
        });

        // TS -> Date
        const inputTs = document.getElementById('input-timestamp');
        const btnTsToDate = document.getElementById('btn-ts-to-date');
        const resultDateDiv = document.getElementById('result-date');
        const resUtc = document.getElementById('res-utc');
        const resLocal = document.getElementById('res-local');
        const resIso = document.getElementById('res-iso');

        btnTsToDate.addEventListener('click', () => {
            const val = inputTs.value.trim();
            if (!val) return;

            const res = UnixTimeLogic.fromUnix(val);
            if (res) {
                resUtc.textContent = res.utc;
                resLocal.textContent = res.local;
                resIso.textContent = res.iso;
                resultDateDiv.style.display = 'block';
            } else {
                alert('無効なタイムスタンプです');
            }
        });

        // Date -> TS
        const inputDate = document.getElementById('input-date');
        const btnDateToTs = document.getElementById('btn-date-to-ts');
        const resultTsDiv = document.getElementById('result-ts');
        const resSeconds = document.getElementById('res-seconds');
        const resMs = document.getElementById('res-ms');

        // Set default to now
        const now = new Date();
        now.setMinutes(now.getMinutes() - now.getTimezoneOffset());
        inputDate.value = now.toISOString().slice(0, 16);

        btnDateToTs.addEventListener('click', () => {
            const val = inputDate.value;
            if (!val) return;

            const res = UnixTimeLogic.toUnix(val);
            if (res) {
                resSeconds.textContent = res.seconds;
                resMs.textContent = res.milliseconds;
                resultTsDiv.style.display = 'block';
            } else {
                alert('無効な日時です');
            }
        });

    </script>
</body>

</html>