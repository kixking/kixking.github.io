<!DOCTYPE html>
<html lang="ja">

<head>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9453304994886859"
        crossorigin="anonymous"></script>
    <meta charset="UTF-8" />
    <title>CSV to RAG Markdown変換｜Simple Tools</title>
    <meta name="description" content="CSVファイルをLLMのRAG用に最適化されたマークダウン形式に変換する無料Webツールです。ブラウザ内完結でセキュア。" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="/assets/css/style.css">
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-4KCLTYQ3D1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-4KCLTYQ3D1');
    </script>
</head>

<body>
    <header>
        <nav class="back-nav">
            <a href="/">&larr; ホームへ戻る</a>
        </nav>
        <h1>CSV to RAG Markdown変換</h1>
        <p class="subtitle">CSVデータをLLMが理解しやすいマークダウン形式に最適化</p>
    </header>

    <main>
        <div class="tool-container">
            <section>
                <div id="drop-zone" class="drop-zone">
                    <div class="tool-icon" style="font-size: 3rem;">📄</div>
                    <p>CSVファイルをドロップするか、クリックしてアップロード</p>
                </div>
                <input type="file" id="file-input" accept=".csv,text/csv" style="display: none;">
            </section>

            <div class="conversion-controls"
                style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1.5rem; border-bottom: 1px solid var(--glass-border); padding-bottom: 2rem;">
                <div class="text-area-group">
                    <label>表示設定</label>
                    <div style="display: flex; flex-direction: column; gap: 0.5rem; margin-top: 0.5rem;">
                        <label style="font-weight: normal; cursor: pointer; font-size: 0.9rem;">
                            <input type="checkbox" id="use-first-col-heading" checked> 1列目を見出しに設定
                        </label>
                        <label style="font-weight: normal; cursor: pointer; font-size: 0.9rem;">
                            <input type="checkbox" id="use-h2" checked> 見出しレベルをH2にする
                        </label>
                        <label style="font-weight: normal; cursor: pointer; font-size: 0.9rem;">
                            <input type="checkbox" id="trim-values" checked> 前後の空白を削除 (Trim)
                        </label>
                    </div>
                </div>

                <div class="text-area-group">
                    <label>欠損値（空データ）の処理</label>
                    <div style="display: flex; flex-direction: column; gap: 0.5rem; margin-top: 0.5rem;">
                        <select id="missing-value-handling"
                            style="padding: 4px; border-radius: 4px; height: 30px; background: rgba(15, 23, 42, 0.4); border: 1px solid var(--glass-border); color: white; width: 100%;">
                            <option value="remove">項目自体を除外する</option>
                            <option value="label">「なし」と記載する</option>
                        </select>
                        <div
                            style="display: flex; align-items: center; gap: 0.5rem; font-size: 0.85rem; margin-top: 0.5rem;">
                            <input type="checkbox" id="enable-threshold"> 空カラムが <input type="number"
                                id="empty-threshold" value="5"
                                style="width: 50px; padding: 4px; border-radius: 4px; height: 30px; background: rgba(15, 23, 42, 0.4); border: 1px solid var(--glass-border); color: white;">
                            個以上なら行を無視
                        </div>
                    </div>
                </div>

                <div class="text-area-group">
                    <label>詳細設定</label>
                    <div style="display: flex; flex-direction: column; gap: 0.5rem; margin-top: 0.5rem;">
                        <div style="display: flex; align-items: center; gap: 0.5rem; font-size: 0.85rem;">
                            区切り文字:
                            <select id="delimiter-override"
                                style="padding: 4px; border-radius: 4px; height: 30px; background: rgba(15, 23, 42, 0.4); border: 1px solid var(--glass-border); color: white;">
                                <option value="auto">自動判別</option>
                                <option value=",">カンマ ( , )</option>
                                <option value="\t">タブ ( TSV )</option>
                                <option value=";">セミコロン ( ; )</option>
                            </select>
                        </div>
                        <div style="display: flex; align-items: center; gap: 0.5rem; font-size: 0.85rem;">
                            レコード間区切り:
                            <input type="text" id="record-separator" value="---"
                                style="padding: 4px; border-radius: 4px; height: 30px; background: rgba(15, 23, 42, 0.4); border: 1px solid var(--glass-border); color: white; width: 60px;">
                        </div>
                    </div>
                </div>
            </div>

            <div id="stats-area" style="font-size: 0.85rem; color: var(--text-muted); margin: 1rem 0; display: none;">
                処理件数: <span id="processed-count">0</span> / スキップ数: <span id="skipped-count">0</span>
            </div>

            <div class="text-areas">
                <div class="text-area-group" style="grid-column: span 2;">
                    <label>
                        変換結果 (Markdown)
                        <div style="display: flex; gap: 0.5rem; align-items: center;">
                            <button class="copy-btn" id="copy-output">コピー</button>
                            <button class="copy-btn" id="download-output"
                                style="background: var(--accent); border-color: rgba(255,255,255,0.1);">ダウンロード
                                (.md)</button>
                        </div>
                    </label>
                    <textarea id="output-text" readonly placeholder="CSVを読み込むとここに変換結果が表示されます..."></textarea>
                </div>
            </div>

            <div class="desc-card">
                <h3>このツールについて</h3>
                <p>
                    CSVの各行を構造化されたマークダウンのブロックに変換します。
                    LLM（ChatGPTやClaudeなど）にナレッジとして与える際（RAG）、単純なCSV形式よりも「項目名: 値」のリスト形式の方がモデルが内容を正確に把握しやすくなる傾向があります。
                    すべての処理はブラウザ上で行われるため、データがサーバーに送信されることはありません。
                </p>
            </div>
        </div>
    </main>

    <div id="toast" class="toast">クリップボードにコピーしました！</div>

    <footer>
        <nav>
            <a href="/about.html">サイト概要</a>
            <a href="/privacy.html">プライバシーポリシー</a>
        </nav>
        <p>&copy; 2026 Simple Tools. All rights reserved.</p>
    </footer>

    <script src="/assets/js/csv-to-rag.js"></script>
</body>

</html>